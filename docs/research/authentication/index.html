<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="
  Token base authentication
  #

Basic flow

Token expired


  Access Token
  #


  Pros
  #

Do you notice some web page allow you go to a route like dashboard immediately just because you has been login before, but some other web app also have dashboard but they request you login every time you go to them
&ndash;&gt; Bad UX
If we use AT, they do not need re-login">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#343a40">
<meta name="color-scheme" content="light dark"><meta property="og:url" content="http://localhost:1313/docs/research/authentication/">
  <meta property="og:site_name" content="Dante 0401">
  <meta property="og:title" content="Token Base Authentication">
  <meta property="og:description" content="Token base authentication # Basic flow Token expired Access Token # Pros # Do you notice some web page allow you go to a route like dashboard immediately just because you has been login before, but some other web app also have dashboard but they request you login every time you go to them
‚Äì&gt; Bad UX
If we use AT, they do not need re-login">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="docs">
    <meta property="article:published_time" content="2024-10-17T01:47:46+07:00">
    <meta property="article:modified_time" content="2024-10-17T01:47:46+07:00">
<title>Token Base Authentication | Dante 0401</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" >
<link rel="canonical" href="http://localhost:1313/docs/research/authentication/">
<link rel="stylesheet" href="/book.min.ef1786281083252320100bd5f394f36844d3252afdbd5bfe72e5f440aaff402b.css" integrity="sha256-7xeGKBCDJSMgEAvV85TzaETTJSr9vVv&#43;cuX0QKr/QCs=" crossorigin="anonymous">
  <script defer src="/fuse.min.js"></script>
  <script defer src="/en.search.min.f219379f15b80e317441bf9ba7caaac7cc07462626449b752d8bdd01b1ff1848.js" integrity="sha256-8hk3nxW4DjF0Qb&#43;bp8qqx8wHRiYmRJt1LYvdAbH/GEg=" crossorigin="anonymous"></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><span>Dante 0401</span>
  </a>
</h2>


<div class="book-search hidden">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>
<script>document.querySelector(".book-search").classList.remove("hidden")</script>












  



  
  <ul>
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>RESEARCH</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/research/process_vs_thread/" class="">Process vs Thread</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/research/chrome_architecture/" class="">Chrome Architecture</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/research/aws_overview/" class="">AWS Overview</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/research/be_protocol/" class="">Backend Protocol</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/research/be_protocol/tcp_udp/" class="">TCP - UDP - Draft</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/research/be_protocol/http/" class="">HTTP - Draft</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/research/be_protocol/tls_ssl/" class="">TLS - SSL - Draft</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/research/be_protocol/https/" class="">HTTPS - Draft</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/research/be_protocol/webrtc/" class="">WebRTC - Draft</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/research/be_protocol/websocket/" class="">Websocket - Draft</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/research/be_protocol/grpc/" class="">gRPC - Draft</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/research/be_protocol/communication/" class="">Communication - Draft</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/research/encryption/" class="">Encryption - Draft</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/research/authentication/" class="active">Token Base Authentication</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/research/event_loop/" class="">Event loop - Draft</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/research/security/" class="">Security - Draft</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/research/security/cors/" class="">CORS - draft</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/research/security/xss/" class="">XSS - Draft</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/research/security/csrf/" class="">CSRF - Draft</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/research/security/packet_sniffing/" class="">Packet Sniffing - Draft</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/research/security/evil_twin/" class="">Evil Twin - Draft</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/research/security/arp_spoofing/" class="">ARP Spoofing - Draft</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/research/security/dns_poisoning/" class="">DNS Poisoning - Draft</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/research/security/hsts/" class="">HSTS - Draft</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/research/scale/" class="">Scale - draft</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>TIPS</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/tips/001_unit_test/" class="">Unit Test</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/tips/002_git/" class="">Git</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/tips/003_docker/" class="">Docker</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/tips/004_ops/" class="">Ops</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/tips/005_passion/" class="">Spark Passion</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>PROBLEMS</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/problems/knight_dialer/" class="">Knight Dialer</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/problems/design_hashmap/" class="">Design HashMap - Draft</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>















</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Token Base Authentication</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#access-token">Access Token</a></li>
        <li><a href="#refresh-token">Refresh Token</a></li>
        <li><a href="#huhu">HUHU</a></li>
      </ul>
    </li>
    <li><a href="#reference">Reference</a></li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown book-article"><h1 id="token-base-authentication">
  Token base authentication
  <a class="anchor" href="#token-base-authentication">#</a>
</h1>
<p>Basic flow
<img src="/research/authentication/basic-flow.png" alt="basic-flow" /></p>
<p>Token expired
<img src="/research/authentication/token-expired.png" alt="token-expired" /></p>
<h3 id="access-token">
  Access Token
  <a class="anchor" href="#access-token">#</a>
</h3>
<h4 id="pros">
  Pros
  <a class="anchor" href="#pros">#</a>
</h4>
<p>Do you notice some web page allow you go to a route like dashboard immediately just because you has been login before, but some other web app also have dashboard but they request you login every time you go to them</p>
<p>&ndash;&gt; Bad UX</p>
<p>If we use AT, they do not need re-login</p>
<h4 id="cons">
  Cons
  <a class="anchor" href="#cons">#</a>
</h4>
<p>If we only use AT for authentication
So when hacker stolen AT successfully, they can impersonate the user</p>
<p>How about short-term AT?</p>
<ul>
<li>Each time we grant AT we need to force user re-login
&ndash;&gt; Bad UX</li>
</ul>
<p>How about combine short-term AT and store AT in DB?
Our server can grant several AT and somehow one of them be stolen by hacker, if we store current AT-list and used-AT list. Then if we renew an AT for hacker or user and then another try to renew a used AT we can clear all of them and then force user to re-login</p>
<ul>
<li>This approach is totally possible
&ndash;&gt; BUT we will increase the I/O cost in DB because too much AT used to check and store</li>
</ul>
<p>&ndash;&gt; So we design RT</p>
<h3 id="refresh-token">
  Refresh Token
  <a class="anchor" href="#refresh-token">#</a>
</h3>
<p>In order to prevent hacker stolen AT, we decide AT only live in a short time
So refresh token born as a factor to re-grant AT when they are expired and user then can be continue their session with our resource without re-login and don&rsquo;t worry about impersonation</p>
<h4 id="each-rt-can-only-be-used-once">
  Each RT can only be used once
  <a class="anchor" href="#each-rt-can-only-be-used-once">#</a>
</h4>
<p>Whenever we see the reused RT, we must right away clear all token and it&rsquo;s keys, then force user to re-login to the system</p>
<h3 id="huhu">
  HUHU
  <a class="anchor" href="#huhu">#</a>
</h3>
<p><img src="/research/authentication/3rd_auth.png" alt="3rd_auth" /></p>
<h2 id="reference">
  Reference
  <a class="anchor" href="#reference">#</a>
</h2>
<ul>
<li>: <a href=""></a> ()</li>
</ul>
<style>
    .feedback-card {
        border: 1px solid #ddd;
        border-radius: 8px;
        padding: 20px;
        max-width: 100%;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        background-color: #f9f9fb;
    }
    .feedback-card h2 {
        font-size: 20px;
        margin-top: 0px;
        margin-bottom: 10px;
    }
    .feedback-card .buttons {
        margin: 10px 0;
    }
    .feedback-card button {
        border: none;
        background-color: #f0f0f0;
        border-radius: 4px;
        padding: 10px 15px;
        margin-right: 10px;
        cursor: pointer;
        font-size: 16px;
    }
    .feedback-card button:hover {
        background-color: #e0e0e0;
    }
    .feedback-card a {
        color: #0074d9;
        text-decoration: none;
    }
    .feedback-card a:hover {
        text-decoration: underline;
    }
    .feedback-card p {
        font-size: 14px;
        color: #555;
    }

     
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border-radius: 7px;
      padding-bottom: 50px;

      background-color: rgba(0, 0, 0, 0.5);
      justify-content: center;
      align-items: flex-end;
    }

    .modal-content {
      background-color: white;
      padding: 20px;
      border-radius: 5px;
      width: 300px;
    }

    .modal input {
      width: 100%;
      padding: 10px;
      margin-bottom: 10px;
    }
</style>
<div class="feedback-card" id="feedbackCard">
    <h2>Help improve my blog</h2>
    <p>Was this page helpful to you?</p>
    <div class="buttons">
        <button id="yesBtn">üëç Yes</button>
        <button id="noBtn">üëé No</button>
    </div>
    <p>This page was last modified at <strong>2024-10-17</strong></p>
    <ul>
        <li><a href="https://github.com/DangPham112000/blog" target="_blank">View this page on GitHub</a></li>
        <li><a href="#" class="link-button" id="linkButton">Report a problem with this content</a></li>
    </ul>
</div>

<div class="modal" id="formModal">
    <div class="feedback-card">
        <h2>Can I know your name?</h2>
        <form id="form">
            <input type="text" name="username" placeholder="Enter your name">
            <button type="submit">Yes</button>
            <button type="submit">No</button>
        </form>
    </div>
</div>

<script>
    const feedbackCardEle = document.getElementById("feedbackCard");
    const formModalEle = document.getElementById('formModal');
    const elesToShowForm = ['linkButton', 'yesBtn', 'noBtn'];

    for (const ele of elesToShowForm) {
        document.getElementById(ele).addEventListener('click', function(e) {
            e.preventDefault();
            formModalEle.style.display = 'flex';
        });
    }

    window.onclick = function(event) {
        if (event.target === formModalEle) {
            formModalEle.style.display = 'none';
        }
    };

    document.getElementById('form').addEventListener('submit', function(e) {
        e.preventDefault(); 
        alert('This feature is currently being developed');
        formModalEle.style.display = 'none'; 
    });
</script>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>



  <script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#access-token">Access Token</a></li>
        <li><a href="#refresh-token">Refresh Token</a></li>
        <li><a href="#huhu">HUHU</a></li>
      </ul>
    </li>
    <li><a href="#reference">Reference</a></li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












