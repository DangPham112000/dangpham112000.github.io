<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="
  Docker Tips
  #


  Terminology
  #


Image: Like the execution file (.exe) and even more. It have all needed setup dependences that stored inside it and ready to run instructions
Container: Like the process after you run the image, but this application at this time is considered as the whole virtual machine


  Create
  #

Create a docker image

  Dockerfile
  #

You will write all the instructions here, guild the Docker engine what enviroment you want your app to run inside, what needed dependencies to be installed, copy your source code into and last but not least is the command to run your app:">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="#343a40">
<meta name="color-scheme" content="light dark"><meta property="og:url" content="https://dangpham112000.github.io/docs/tips/003_docker/">
  <meta property="og:site_name" content="Dante 0401">
  <meta property="og:title" content="Docker">
  <meta property="og:description" content="Docker Tips # Terminology # Image: Like the execution file (.exe) and even more. It have all needed setup dependences that stored inside it and ready to run instructions Container: Like the process after you run the image, but this application at this time is considered as the whole virtual machine Create # Create a docker image
Dockerfile # You will write all the instructions here, guild the Docker engine what enviroment you want your app to run inside, what needed dependencies to be installed, copy your source code into and last but not least is the command to run your app:">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="docs">
    <meta property="article:published_time" content="2024-04-08T01:47:46+07:00">
    <meta property="article:modified_time" content="2024-04-08T01:47:46+07:00">
<title>Docker | Dante 0401</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" >
<link rel="canonical" href="https://dangpham112000.github.io/docs/tips/003_docker/">
<link rel="stylesheet" href="/book.min.ef1786281083252320100bd5f394f36844d3252afdbd5bfe72e5f440aaff402b.css" integrity="sha256-7xeGKBCDJSMgEAvV85TzaETTJSr9vVv&#43;cuX0QKr/QCs=" crossorigin="anonymous">
  <script defer src="/fuse.min.js"></script>
  <script defer src="/en.search.min.8cd250da139fc136773875cc0c5c476270e41dde5b32a6624b24175c7dd7d37b.js" integrity="sha256-jNJQ2hOfwTZ3OHXMDFxHYnDkHd5bMqZiSyQXXH3X03s=" crossorigin="anonymous"></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/"><span>Dante 0401</span>
  </a>
</h2>


<div class="book-search hidden">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>
<script>document.querySelector(".book-search").classList.remove("hidden")</script>












  



  
  <ul>
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>RESEARCH</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/research/process_vs_thread/" class="">Process vs Thread</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/research/chrome_architecture/" class="">Chrome Architecture</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/research/aws_overview/" class="">AWS Overview</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/research/be_protocol/" class="">Backend</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/research/be_protocol/tls_ssl/" class="">TLS - SSL</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/research/be_protocol/communication/" class="">Communication</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/research/be_protocol/rabbitmq/" class="">RabbitMQ</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/research/be_protocol/kafka/" class="">Kafka - Draft</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/research/encryption/" class="">Encryption</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/research/token_based_authentication/" class="">Token-based Authentication</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/research/security/" class="">Security - Draft</a>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/research/security/hsts/" class="">HSTS</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/research/security/bit_flipping/" class="">Bit Flipping</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/research/scale/" class="">Scale</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>TIPS</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/tips/001_unit_test/" class="">Unit Test</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/tips/002_git/" class="">Git</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/tips/003_docker/" class="active">Docker</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/tips/004_ops/" class="">Ops</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/tips/005_passion/" class="">Spark Passion</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <span>PROBLEMS</span>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/problems/knight_dialer/" class="">Knight Dialer</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>















</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Docker</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#terminology">Terminology</a></li>
    <li><a href="#create">Create</a>
      <ul>
        <li><a href="#dockerfile">Dockerfile</a></li>
        <li><a href="#build">Build</a></li>
        <li><a href="#build-an-image-with-specific-docker-file-name">Build an image with specific docker file name</a></li>
        <li><a href="#build-an-image-from-the-running-container">Build an image from the running container</a></li>
        <li><a href="#how-to-import-your-project-files-into-the-image">How to import your project files into the image</a></li>
      </ul>
    </li>
    <li><a href="#run">Run</a>
      <ul>
        <li><a href="#docker-run-with-port-mapping">Docker Run with port mapping</a></li>
        <li><a href="#detach-mode">Detach mode</a></li>
        <li><a href="#attach-mode">Attach mode</a></li>
      </ul>
    </li>
    <li><a href="#execute">Execute</a>
      <ul>
        <li><a href="#exec-command">Exec command</a></li>
        <li><a href="#terminal-access">Terminal access</a></li>
      </ul>
    </li>
    <li><a href="#listing">Listing</a>
      <ul>
        <li><a href="#container">Container</a></li>
        <li><a href="#image">Image</a></li>
      </ul>
    </li>
    <li><a href="#caching">Caching</a></li>
    <li><a href="#volumes">Volumes</a>
      <ul>
        <li><a href="#change-code-in-local-machine-and-effect-the-container-right-away-without-rebuild">Change code in local machine and effect the container right away without rebuild</a></li>
      </ul>
    </li>
    <li><a href="#stop">Stop</a>
      <ul>
        <li><a href="#soft">Soft</a></li>
        <li><a href="#hard">Hard</a></li>
      </ul>
    </li>
    <li><a href="#remove">Remove</a>
      <ul>
        <li><a href="#remove-stopped-container">Remove stopped container</a></li>
        <li><a href="#remove-all-stopped-containers-and-images">Remove all stopped containers and images</a></li>
      </ul>
    </li>
    <li><a href="#log">Log</a></li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown book-article"><h1 id="docker-tips">
  Docker Tips
  <a class="anchor" href="#docker-tips">#</a>
</h1>
<h2 id="terminology">
  Terminology
  <a class="anchor" href="#terminology">#</a>
</h2>
<ul>
<li><code>Image</code>: Like the execution file (.exe) and even more. It have all needed setup dependences that stored inside it and ready to run instructions</li>
<li><code>Container</code>: Like the process after you run the image, but this application at this time is considered as the whole virtual machine</li>
</ul>
<h2 id="create">
  Create
  <a class="anchor" href="#create">#</a>
</h2>
<p>Create a docker image</p>
<h3 id="dockerfile">
  Dockerfile
  <a class="anchor" href="#dockerfile">#</a>
</h3>
<p>You will write all the instructions here, guild the Docker engine what enviroment you want your app to run inside, what needed dependencies to be installed, copy your source code into and last but not least is the command to run your app:</p>
<ol>
<li>Specify a base image</li>
<li>Run some commands to install additional programs</li>
<li>Specify a command to run on the container startup</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Dockerfile" data-lang="Dockerfile"><span style="display:flex;"><span><span style="color:#75715e"># Dockerfile</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># 1. Use an existing docker image as a base</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">FROM</span><span style="color:#e6db74"> alpine</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># 2. Download and install a dependency</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">RUN</span> apk add --update redis<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># 3. Tell the image what to do when it starts as a container</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">CMD</span> [<span style="color:#e6db74">&#34;redis-server&#34;</span>]<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><h3 id="build">
  Build
  <a class="anchor" href="#build">#</a>
</h3>
<p>Build an image</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#75715e"># syntax</span>
</span></span><span style="display:flex;"><span>docker build -t &lt;docker-id&gt;/&lt;project-name&gt;:&lt;version&gt; .
</span></span><span style="display:flex;"><span><span style="color:#75715e"># eg.</span>
</span></span><span style="display:flex;"><span>docker build -t dangpham/redis:v1 .
</span></span></code></pre></div><ul>
<li>The <code>-t</code> flag tags your image with a name (<code>dangpham/redis:v1</code> in this case)</li>
<li>The <code>.</code> is the build context that lets Docker know where it can find the Dockerfile</li>
</ul>
<h3 id="build-an-image-with-specific-docker-file-name">
  Build an image with specific docker file name
  <a class="anchor" href="#build-an-image-with-specific-docker-file-name">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker build -f Dockerfile.dev .
</span></span></code></pre></div><h3 id="build-an-image-from-the-running-container">
  Build an image from the running container
  <a class="anchor" href="#build-an-image-from-the-running-container">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker commit -c &lt;instruction&gt; &lt;container-id&gt; &lt;image-name&gt;
</span></span><span style="display:flex;"><span><span style="color:#75715e"># eg.</span>
</span></span><span style="display:flex;"><span>docker commit -c <span style="color:#e6db74">&#39;CMD [&#34;redis-server&#34;]&#39;</span> c3f279d17e0a dangpham/redis:v2
</span></span></code></pre></div><h3 id="how-to-import-your-project-files-into-the-image">
  How to import your project files into the image
  <a class="anchor" href="#how-to-import-your-project-files-into-the-image">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Dockerfile" data-lang="Dockerfile"><span style="display:flex;"><span><span style="color:#75715e"># Specify a base image</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">FROM</span><span style="color:#e6db74"> node:14-alpine</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">WORKDIR</span><span style="color:#e6db74"> /usr/app</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># Install some dependencies</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">COPY</span> ./ ./<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">RUN</span> npm install<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># Default command</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">CMD</span> [<span style="color:#e6db74">&#34;npm&#34;</span>, <span style="color:#e6db74">&#34;start&#34;</span>]<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><ul>
<li><code>WORKDIR /usr/app</code>: change container context into this path. It will create a new folder if it doesn’t exist</li>
<li><code>COPY ./ ./</code>: copy from <code>computer-context</code> to <code>container-context</code>
<ul>
<li><code>computer context</code>: Path to folder copy from on <em>your machine</em> relative to build context</li>
<li><code>container context</code>: Place to copy stuff inside <em>the container</em> (<code>/usr/app</code> in this case)</li>
</ul>
</li>
</ul>
<h2 id="run">
  Run
  <a class="anchor" href="#run">#</a>
</h2>
<p>Run a container from the image</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker run &lt;image-name&gt;
</span></span><span style="display:flex;"><span>docker run -it &lt;image-name&gt; sh
</span></span></code></pre></div><ul>
<li><code>docker run …</code> = <code>docker create …</code> + <code>docker start -a …</code></li>
<li><code>-it ... sh</code>: connect your terminal with the container shell</li>
</ul>
<h3 id="docker-run-with-port-mapping">
  Docker Run with port mapping
  <a class="anchor" href="#docker-run-with-port-mapping">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker run -p &lt;container-port&gt;:&lt;app-port&gt; &lt;image-name&gt;
</span></span><span style="display:flex;"><span><span style="color:#75715e"># eg,</span>
</span></span><span style="display:flex;"><span>docker run -p 7070:8080 dangpham/web-app:v1
</span></span></code></pre></div><ul>
<li><code>container-port</code>: Your computer will open this port for container</li>
<li><code>app-port</code>: Your running application exported port inside the container</li>
</ul>
<h3 id="detach-mode">
  Detach mode
  <a class="anchor" href="#detach-mode">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker run &lt;image-name&gt; -d
</span></span></code></pre></div><ul>
<li>The <code>-d</code> flag starts up a container in detached mode</li>
<li>Means that output from the container will not be piped to your terminal</li>
<li>You can continue to run other commands while the container is still running</li>
</ul>
<h3 id="attach-mode">
  Attach mode
  <a class="anchor" href="#attach-mode">#</a>
</h3>
<ul>
<li>Attach to the <code>sdtin</code>, <code>stdout</code>, <code>stderr</code> of container&rsquo;s primary process into your terminal</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker attach &lt;container-id&gt;
</span></span></code></pre></div><h2 id="execute">
  Execute
  <a class="anchor" href="#execute">#</a>
</h2>
<ul>
<li>
<p>Every process that we create in a Linux environment has three communication channels attached to it, that we refer to as:</p>
<ul>
<li><code>stdin</code>: input to process</li>
<li><code>stdout</code>: output from process</li>
<li><code>stderr</code>: error form process</li>
</ul>
</li>
<li>
<p>These channels are used to communicate information either into the process or out of the process</p>
</li>
</ul>
<h3 id="exec-command">
  Exec command
  <a class="anchor" href="#exec-command">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker exec -it &lt;container-id&gt; &lt;command&gt;
</span></span></code></pre></div><ul>
<li><code>-it</code>: Allow us to provide input to the container</li>
<li>The <code>-i</code> flag: we are saying make sure that any stuff that our typed gets directed to <code>stdin</code> of Process.</li>
<li>The <code>-t</code> flag: make those stuff we receive prettier</li>
</ul>
<h3 id="terminal-access">
  Terminal access
  <a class="anchor" href="#terminal-access">#</a>
</h3>
<p>Get full terminal access inside the context of the container</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker exec -it &lt;container-id&gt; sh
</span></span></code></pre></div><ul>
<li><code>sh</code> means a shell or a command processor</li>
<li>Allow us to type commands in and have them be executed inside that container</li>
</ul>
<h2 id="listing">
  Listing
  <a class="anchor" href="#listing">#</a>
</h2>
<h3 id="container">
  Container
  <a class="anchor" href="#container">#</a>
</h3>
<ul>
<li>Listing all running containers:</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker ps
</span></span></code></pre></div><ul>
<li>Listing both stopped and runnning containers:</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker ps --all
</span></span></code></pre></div><h3 id="image">
  Image
  <a class="anchor" href="#image">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sh" data-lang="sh"><span style="display:flex;"><span>docker image ls
</span></span></code></pre></div><h2 id="caching">
  Caching
  <a class="anchor" href="#caching">#</a>
</h2>
<p>Docker has the cache mechanism, that compare each instruction in your Dockerfile with its previous</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-Dockerfile" data-lang="Dockerfile"><span style="display:flex;"><span><span style="color:#75715e"># Specify a base image</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">FROM</span><span style="color:#e6db74"> node:14-alpine</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">WORKDIR</span><span style="color:#e6db74"> /usr/app</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># Install some dependencies</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">COPY</span> ./package.json ./<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">RUN</span> npm install<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">COPY</span> ./ ./<span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#75715e"># Default command</span><span style="color:#960050;background-color:#1e0010">
</span></span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010"></span><span style="color:#66d9ef">CMD</span> [<span style="color:#e6db74">&#34;npm&#34;</span>, <span style="color:#e6db74">&#34;start&#34;</span>]<span style="color:#960050;background-color:#1e0010">
</span></span></span></code></pre></div><ul>
<li><code>package.json</code> israrely update so copying <code>package.json</code> before copying all other stuff
<ul>
<li>It will help Docker runing <code>npm install</code> with cache and</li>
<li>It will not re-install all dependencies just because you edit some html/css/js files</li>
</ul>
</li>
</ul>
<h2 id="volumes">
  Volumes
  <a class="anchor" href="#volumes">#</a>
</h2>
<h3 id="change-code-in-local-machine-and-effect-the-container-right-away-without-rebuild">
  Change code in local machine and effect the container right away without rebuild
  <a class="anchor" href="#change-code-in-local-machine-and-effect-the-container-right-away-without-rebuild">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker run -p 3000:3000 -v /app/node_modules -v <span style="color:#66d9ef">$(</span>pwd<span style="color:#66d9ef">)</span>:/app &lt;image_name&gt;
</span></span></code></pre></div><ul>
<li>Note:
<ul>
<li><code>-v /app/node_modules</code>: Put a bookmark on the <code>node_modules</code> folder</li>
<li><code>pwd</code>: Present Working Directory</li>
<li><code>-v $(pwd):/app</code>: Map the <code>pwd</code> into the <code>/app</code> folder</li>
</ul>
</li>
<li>Explain:
<ul>
<li>Means reference all files in <code>pwd</code> (except things inside <code>node_modules</code>) with all files in <code>/app</code></li>
<li>So when we change code in <code>pwd</code>, it also references to <code>/app</code></li>
</ul>
</li>
</ul>
<h2 id="stop">
  Stop
  <a class="anchor" href="#stop">#</a>
</h2>
<p>When you issue docker stop to a container, if the container does not automatically stop in 10 seconds, then Docker is going to automatically fall back to issuing the docker kill command.</p>
<h3 id="soft">
  Soft
  <a class="anchor" href="#soft">#</a>
</h3>
<p>Send SIGTERM (terminate signal) to the process: give a process inside the container a little bit of time to do ST (like backup, etc…)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker stop &lt;container-id&gt;
</span></span></code></pre></div><h3 id="hard">
  Hard
  <a class="anchor" href="#hard">#</a>
</h3>
<p>Send SIGKILL (kills signal): shut down right now</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker kill &lt;container-id&gt;
</span></span></code></pre></div><h2 id="remove">
  Remove
  <a class="anchor" href="#remove">#</a>
</h2>
<h3 id="remove-stopped-container">
  Remove stopped container
  <a class="anchor" href="#remove-stopped-container">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker rm &lt;name&gt;
</span></span></code></pre></div><h3 id="remove-all-stopped-containers-and-images">
  Remove all stopped containers and images
  <a class="anchor" href="#remove-all-stopped-containers-and-images">#</a>
</h3>
<p>Remove all stopped containers in your machine and also clear your docker cache. It means you must re-download it from docker-hub in the next run</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker system prune
</span></span></code></pre></div><h2 id="log">
  Log
  <a class="anchor" href="#log">#</a>
</h2>
<p>Retrieve all information that has been emitted from the docker</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker logs &lt;container-id&gt;
</span></span></code></pre></div><style>
    .feedback-card {
        border: 1px solid #ddd;
        border-radius: 8px;
        padding: 20px;
        max-width: 100%;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        background-color: #f9f9fb;
    }
    .feedback-card h2 {
        font-size: 20px;
        margin-top: 0px;
        margin-bottom: 10px;
    }
    .feedback-card .buttons {
        margin: 10px 0;
    }
    .feedback-card button {
        border: none;
        background-color: #f0f0f0;
        border-radius: 4px;
        padding: 10px 15px;
        margin-right: 10px;
        cursor: pointer;
        font-size: 16px;
    }
    .feedback-card button:hover {
        background-color: #e0e0e0;
    }
    .feedback-card a {
        color: #0074d9;
        text-decoration: none;
    }
    .feedback-card a:hover {
        text-decoration: underline;
    }
    .feedback-card p {
        font-size: 14px;
        color: #555;
    }

     
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border-radius: 7px;
      padding-bottom: 50px;

      background-color: rgba(0, 0, 0, 0.5);
      justify-content: center;
      align-items: flex-end;
    }

    .modal-content {
      background-color: white;
      padding: 20px;
      border-radius: 5px;
      width: 300px;
    }

    .modal input {
      width: 100%;
      padding: 10px;
      margin-bottom: 10px;
    }
</style>
<div class="feedback-card" id="feedbackCard">
    <h2>Help improve my blog</h2>
    <p>Was this page helpful to you?</p>
    <div class="buttons">
        <button id="yesBtn">👍 Yes</button>
        <button id="noBtn">👎 No</button>
    </div>
    <p>This page was last modified at <strong>2024-04-08</strong></p>
    <ul>
        <li><a href="https://github.com/DangPham112000/blog" target="_blank">View this page on GitHub</a></li>
        <li><a href="#" class="link-button" id="linkButton">Report a problem with this content</a></li>
    </ul>
</div>

<div class="modal" id="formModal">
    <div class="feedback-card">
        <h2>Can I know your name?</h2>
        <form id="form">
            <input type="text" name="username" placeholder="Enter your name">
            <button type="submit">Yes</button>
            <button type="submit">No</button>
        </form>
    </div>
</div>

<script>
    const feedbackCardEle = document.getElementById("feedbackCard");
    const formModalEle = document.getElementById('formModal');
    const elesToShowForm = ['linkButton', 'yesBtn', 'noBtn'];

    for (const ele of elesToShowForm) {
        document.getElementById(ele).addEventListener('click', function(e) {
            e.preventDefault();
            formModalEle.style.display = 'flex';
        });
    }

    window.onclick = function(event) {
        if (event.target === formModalEle) {
            formModalEle.style.display = 'none';
        }
    };

    document.getElementById('form').addEventListener('submit', function(e) {
        e.preventDefault(); 
        alert('This feature is currently being developed');
        formModalEle.style.display = 'none'; 
    });
</script>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">





</div>



  <script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#terminology">Terminology</a></li>
    <li><a href="#create">Create</a>
      <ul>
        <li><a href="#dockerfile">Dockerfile</a></li>
        <li><a href="#build">Build</a></li>
        <li><a href="#build-an-image-with-specific-docker-file-name">Build an image with specific docker file name</a></li>
        <li><a href="#build-an-image-from-the-running-container">Build an image from the running container</a></li>
        <li><a href="#how-to-import-your-project-files-into-the-image">How to import your project files into the image</a></li>
      </ul>
    </li>
    <li><a href="#run">Run</a>
      <ul>
        <li><a href="#docker-run-with-port-mapping">Docker Run with port mapping</a></li>
        <li><a href="#detach-mode">Detach mode</a></li>
        <li><a href="#attach-mode">Attach mode</a></li>
      </ul>
    </li>
    <li><a href="#execute">Execute</a>
      <ul>
        <li><a href="#exec-command">Exec command</a></li>
        <li><a href="#terminal-access">Terminal access</a></li>
      </ul>
    </li>
    <li><a href="#listing">Listing</a>
      <ul>
        <li><a href="#container">Container</a></li>
        <li><a href="#image">Image</a></li>
      </ul>
    </li>
    <li><a href="#caching">Caching</a></li>
    <li><a href="#volumes">Volumes</a>
      <ul>
        <li><a href="#change-code-in-local-machine-and-effect-the-container-right-away-without-rebuild">Change code in local machine and effect the container right away without rebuild</a></li>
      </ul>
    </li>
    <li><a href="#stop">Stop</a>
      <ul>
        <li><a href="#soft">Soft</a></li>
        <li><a href="#hard">Hard</a></li>
      </ul>
    </li>
    <li><a href="#remove">Remove</a>
      <ul>
        <li><a href="#remove-stopped-container">Remove stopped container</a></li>
        <li><a href="#remove-all-stopped-containers-and-images">Remove all stopped containers and images</a></li>
      </ul>
    </li>
    <li><a href="#log">Log</a></li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












